<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="CPF Dashboard - Verify Email">
    <meta name="robots" content="noindex, nofollow">
    <title>Verify Email - CPF Dashboard</title>
    <link rel="stylesheet" href="/css/auth.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üõ°Ô∏è</text></svg>">
</head>
<body>
    <!-- Language Selector -->
    <div class="language-selector">
        <button class="language-btn" id="langBtn" aria-label="Select language">
            <span id="currentLang">EN</span>
            <span>‚ñº</span>
        </button>
        <div class="language-dropdown" id="langDropdown">
            <a href="#" class="language-option active" data-lang="en-US">English</a>
            <a href="#" class="language-option" data-lang="it-IT">Italiano</a>
        </div>
    </div>

    <div class="auth-container">
        <div class="auth-card">
            <!-- Header -->
            <div class="auth-header">
                <div class="auth-logo">üìß</div>
                <h1 class="auth-title" data-i18n="verify.title">Email Verification</h1>
                <p class="auth-subtitle" data-i18n="verify.subtitle">Confirming your email address</p>
            </div>

            <!-- Body -->
            <div class="auth-body">
                <!-- Loading State -->
                <div id="loadingState" class="text-center">
                    <div class="btn loading" style="background: transparent; pointer-events: none;"></div>
                    <p class="mt-2" data-i18n="verify.verifying">Verifying your email...</p>
                </div>

                <!-- Success State -->
                <div class="hidden" id="successState">
                    <div class="alert alert-success">
                        <span class="alert-icon">‚úÖ</span>
                        <div class="alert-content">
                            <div class="alert-title" data-i18n="verify.success">Email Verified!</div>
                            <p id="successMessage"></p>
                        </div>
                    </div>
                    <a href="/login" class="btn btn-primary btn-block mt-2" data-i18n="verify.login">Go to Login</a>
                </div>

                <!-- Pending Approval State -->
                <div class="hidden" id="pendingState">
                    <div class="alert alert-info">
                        <span class="alert-icon">‚è≥</span>
                        <div class="alert-content">
                            <div class="alert-title" data-i18n="verify.pending">Pending Approval</div>
                            <p data-i18n="verify.pendingMessage">Your email has been verified. Your account is now pending administrator approval. You'll receive an email when your account is activated.</p>
                        </div>
                    </div>
                </div>

                <!-- Error State -->
                <div class="hidden" id="errorState">
                    <div class="alert alert-error">
                        <span class="alert-icon">‚ö†Ô∏è</span>
                        <div class="alert-content">
                            <div class="alert-title" data-i18n="verify.error">Verification Failed</div>
                            <p id="errorMessage" data-i18n="verify.errorMessage">This verification link is invalid or has expired.</p>
                        </div>
                    </div>

                    <div class="divider" data-i18n="verify.or">or</div>

                    <form id="resendForm" novalidate>
                        <div class="form-group">
                            <label class="form-label" for="email" data-i18n="verify.resendLabel">Request a new verification email:</label>
                            <input
                                type="email"
                                id="email"
                                name="email"
                                class="form-input"
                                placeholder="your@email.com"
                            >
                        </div>
                        <button type="submit" class="btn btn-secondary btn-block" id="resendBtn">
                            <span data-i18n="verify.resend">Resend Verification Email</span>
                        </button>
                    </form>
                </div>

                <!-- Resend Success -->
                <div class="hidden" id="resendSuccess">
                    <div class="alert alert-success">
                        <span class="alert-icon">‚úÖ</span>
                        <div class="alert-content">
                            <div class="alert-title" data-i18n="verify.resendSuccess">Email Sent!</div>
                            <p data-i18n="verify.resendSuccessMessage">If that email is registered, a new verification link has been sent.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <div class="auth-footer">
                <p>
                    <a href="/login" class="auth-link" data-i18n="verify.backToLogin">‚Üê Back to Login</a>
                </p>
            </div>
        </div>

        <!-- Meta -->
        <div class="auth-meta">
            <p>¬© 2024 CPF Dashboard</p>
        </div>
    </div>

    <script src="/js/i18n.js"></script>
    <script src="/js/auth-client.js"></script>
    <script src="/js/verify-email.js"></script>
</body>
</html>
